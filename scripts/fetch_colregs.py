"""
COLREGs (국제해상충돌방지규칙) 데이터 수집 스크립트
실제 규정 텍스트와 적용 상황을 구조화하여 저장
"""
import json
import os

# COLREGs 핵심 규정 - 실제 국제해상충돌방지규칙 기반
COLREGS_RULES = [
    {
        "id": "rule_05",
        "title": "제5조 - 경계(Look-out)",
        "category": "General",
        "trigger_situations": ["모든 상황", "시계 제한", "야간 항해"],
        "summary": "모든 선박은 주위 상황과 충돌 위험을 완전히 평가하기 위하여 시각, 청각 및 그 상황에 적합한 모든 수단을 이용하여 항상 적절한 경계를 하여야 한다.",
        "full_text": """제5조 경계(Look-out)

모든 선박은 주위 상황과 충돌 위험을 완전히 평가하기 위하여 시각, 청각 및 그 상황에 적합한 모든 수단을 이용하여 항상 적절한 경계를 하여야 한다.

적용:
- 모든 시정 상태에서 적용
- 레이더, AIS 등 전자 장비 활용 필수
- 야간, 안개 등 시계 제한 시 청각 경계 강화 필요
        """,
        "actions": ["경계 강화", "레이더/AIS 확인", "충돌 위험 평가"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["모든 시정"],
        "legal_weight": 10
    },
    {
        "id": "rule_06",
        "title": "제6조 - 안전한 속력(Safe Speed)",
        "category": "General",
        "trigger_situations": ["시계 제한", "조밀 항해", "고속 항해"],
        "summary": "모든 선박은 충돌을 피하기 위한 적절하고 유효한 동작을 취할 수 있고 그 당시의 상황에 적합한 거리 내에서 선박을 정지시킬 수 있도록 항상 안전한 속력으로 항행하여야 한다.",
        "full_text": """제6조 안전한 속력(Safe Speed)

모든 선박은 충돌을 피하기 위한 적절하고 유효한 동작을 취할 수 있고 그 당시의 상황에 적합한 거리 내에서 선박을 정지시킬 수 있도록 항상 안전한 속력으로 항행하여야 한다.

고려 사항:
1. 시정 상태
2. 통항 밀도
3. 선박의 정지 거리, 선회 성능
4. 야간 배경등, 레이더의 특성과 효율
5. 바람, 해면 및 조류의 상태
6. 항행 위험물에 근접한 정도

레이더 사용 시 추가 고려:
- 레이더 장비의 특성 및 효율
- 탐지한 물체의 수, 위치 및 동향
- 소형 선박, 얼음 등의 레이더 탐지 한계
        """,
        "actions": ["감속", "정지 가능 속력 유지", "상황별 속력 조정"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["특히 시계 제한 시"],
        "legal_weight": 9
    },
    {
        "id": "rule_07",
        "title": "제7조 - 충돌의 위험(Risk of Collision)",
        "category": "General",
        "trigger_situations": ["타선 접근", "방위 변화 없음", "레이더 탐지"],
        "summary": "모든 선박은 충돌의 위험이 있는지를 판단하기 위하여 그 상황에 적합한 모든 수단을 이용하여야 한다. 의심스러운 경우에는 충돌의 위험이 있는 것으로 본다.",
        "full_text": """제7조 충돌의 위험(Risk of Collision)

1. 모든 선박은 충돌의 위험이 있는지를 판단하기 위하여 그 상황에 적합한 모든 수단을 이용하여야 한다.

2. 적절한 레이더 장비를 설치한 선박은 충돌 위험을 조기에 경고하기 위하여 장거리 스캐닝을 포함한 레이더의 적절한 사용을 하여야 한다.

3. 불충분한 정보(특히 레이더 정보만)에 근거하여 판단해서는 안 된다.

4. 충돌 위험 판단 기준:
   - 접근하는 선박의 나침 방위에 뚜렷한 변화가 없다면 충돌 위험이 있는 것으로 본다
   - 대형 선박/예인선 접근, 근거리 접근 시 방위 변화가 있어도 위험 존재 가능
   - 의심스러운 경우에는 충돌 위험이 있는 것으로 간주

5. CPA(Closest Point of Approach) 계산:
   - 최근접점 거리 0.5마일 이내: 고위험
   - 최근접점 거리 0.5-1.0마일: 중위험
   - 최근접점 시간 6분 이내: 긴급 조치 필요
        """,
        "actions": ["방위 관측", "CPA/TCPA 계산", "레이더 플로팅", "조기 충돌 회피 동작"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["모든 시정"],
        "legal_weight": 10
    },
    {
        "id": "rule_08",
        "title": "제8조 - 충돌을 피하기 위한 동작(Action to Avoid Collision)",
        "category": "General",
        "trigger_situations": ["충돌 위험 확인", "회피 동작 필요"],
        "summary": "충돌을 피하기 위한 동작은 적극적이고, 충분한 시간적 여유를 두고, 선박 운용상 적절한 방법으로 이루어져야 한다.",
        "full_text": """제8조 충돌을 피하기 위한 동작(Action to Avoid Collision)

1. 충돌을 피하기 위한 동작 원칙:
   - 해당 상황에서 적극적(positive)이어야 함
   - 충분한 시간적 여유를 두고(in ample time) 시행
   - 선원의 상무(good seamanship)에 따라 시행

2. 침로 및/또는 속력 변경:
   - 타선이 명확히 인식할 수 있을 정도로 충분히(readily apparent) 커야 함
   - 작은 변경들을 연속적으로 하는 것은 피해야 함
   - 대폭적이고 명확한 단일 동작 권장

3. 상황별 권고:
   - 충분한 수역이 있는 경우: 침로 변경만으로도 효과적
   - 다른 선박을 피하기 위한 침로 변경 시: 다른 선박과의 새로운 근접 상황 초래 방지

4. 안전거리 확보:
   - 최종적으로 타선과 충분한 거리를 두고 통과하여야 함
   - 충돌 위험이 없어질 때까지 상대 선박 주시
   - 완전히 통과할 때까지 경계 유지

5. 특별 주의사항:
   - 타선의 추월 금지
   - 급격한 좌현 변침 금지 (정선, 준정선 제외)
        """,
        "actions": ["대폭적 변침", "명확한 감속", "안전거리 확보", "연속 소폭 변침 금지"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["모든 시정"],
        "legal_weight": 10
    },
    {
        "id": "rule_13",
        "title": "제13조 - 추월(Overtaking)",
        "category": "Conduct of Vessels in Sight",
        "trigger_situations": ["후방에서 접근", "추월 상황"],
        "summary": "다른 선박을 추월하는 선박은 추월당하는 선박의 침로를 피하여야 한다.",
        "full_text": """제13조 추월(Overtaking)

1. 추월 정의:
   야간에 그 선박의 마스트등만 볼 수 있고 현등을 볼 수 없는 방향에서, 즉 추월 당하는 선박의 정선 방향으로부터 22.5도 이상 뒤쪽 위치에서 다른 선박을 따라잡는 선박.

2. 추월선 의무:
   - 추월선은 '피항선(Give-way vessel)'
   - 완전히 통과하여 충분히 떨어질 때까지 피항 의무 지속
   - 추월당하는 선박의 침로에서 벗어나야 함

3. 추월 여부 판단:
   - 의심스러운 경우 추월로 간주하고 행동
   - 야간: 선미등만 보이는 경우 추월 상황
   - 주간: 상대 선박 정선 후방 22.5도 이상에서 접근

4. 추월당하는 선박(Stand-on vessel):
   - 침로와 속력 유지
   - 추월선의 동작을 방해하지 않음
   - 다만, 제17조(피항선과 유지선의 동작) 적용

5. 협수로에서의 추월:
   - 제9조 협수로 규정 우선 적용
   - 추월을 위해서는 피추월선과 합의 필요 (기적 신호)
        """,
        "actions": ["침로 이탈", "안전거리 확보", "완전 통과 후까지 경계"],
        "vessel_types": ["추월선"],
        "visibility_conditions": ["시계 내"],
        "legal_weight": 8
    },
    {
        "id": "rule_14",
        "title": "제14조 - 마주치는 상태(Head-on Situation)",
        "category": "Conduct of Vessels in Sight",
        "trigger_situations": ["정면 충돌 코스", "마주 보는 상황", "양선 정선 방향"],
        "summary": "두 동력선이 마주치거나 거의 마주치는 침로로 항행하여 충돌의 위험이 있는 경우, 각 선박은 타선의 좌현쪽을 통과할 수 있도록 침로를 우현쪽으로 변경하여야 한다.",
        "full_text": """제14조 마주치는 상태(Head-on Situation)

1. 마주치는 상태 정의:
   - 두 동력선이 정면 또는 거의 정면으로 마주 보는 침로
   - 충돌 위험이 있는 경우
   - 야간: 상대 선박의 마스트등 및 양쪽 현등을 모두 볼 수 있는 경우
   - 주간: 상대 선박이 그러한 외관을 나타내는 경우

2. 양 선박 의무:
   - 각 선박은 상대 선박의 좌현쪽(port side)을 통과하도록
   - 침로를 우현쪽(starboard)으로 변경
   - 양선 모두 피항선 (Both give-way)

3. 마주치는 상태 판단:
   - 의심스러운 경우 마주치는 상태로 간주하고 행동
   - 정면으로부터 좌우 각각 6도 이내 접근

4. 회피 동작:
   - 명확하고 대폭적인 우현 변침
   - 좌현쪽 변침 금지 (절대 금지)
   - 충분한 여유를 두고 조기에 시행
   - 양 선박 모두 협력적 회피 필요

5. 특수 상황:
   - 협수로: 우측 통항 원칙(제9조) 우선
   - 분리통항방식 수역: 제10조 규정 우선
        """,
        "actions": ["우현 변침", "좌현쪽 통과", "조기 대폭 변침", "좌현 변침 절대 금지"],
        "vessel_types": ["동력선"],
        "visibility_conditions": ["시계 내"],
        "legal_weight": 10
    },
    {
        "id": "rule_15",
        "title": "제15조 - 횡단하는 상태(Crossing Situation)",
        "category": "Conduct of Vessels in Sight",
        "trigger_situations": ["교차 항로", "우현 접근", "좌현 접근"],
        "summary": "두 동력선이 교차하여 충돌의 위험이 있는 경우, 타선을 우현쪽에 두고 있는 선박이 피항하여야 한다.",
        "full_text": """제15조 횡단하는 상태(Crossing Situation)

1. 횡단 상태 정의:
   - 두 동력선이 교차하는 침로
   - 충돌 위험이 있는 경우
   - 마주치는 상태(제14조) 또는 추월(제13조)이 아닌 경우

2. 피항선(Give-way vessel) 판단:
   - 타선을 우현쪽(starboard side)에 두고 있는 선박이 피항선
   - 즉, 상대 선박이 내 우현에서 접근하면 내가 피해야 함
   - "우현에 보이면 내가 피한다"

3. 피항선 의무:
   - 타선의 침로를 피하여야 함
   - 상대 선박 앞을 가로지르는 것 금지
   - 일반적으로 상대 선박의 선미(stern)를 통과하도록 변침

4. 유지선(Stand-on vessel):
   - 타선을 좌현쪽에 두고 있는 선박
   - 침로와 속력 유지 의무
   - 다만, 제17조(피항선과 유지선의 동작) 적용

5. 회피 동작 권고:
   - 우현 대폭 변침 (상대 선미 통과)
   - 감속 또는 정지 (필요시)
   - 좌현 변침은 상황에 따라 위험할 수 있음
   - 충분한 여유를 두고 조기에 시행

6. 야간 판단:
   - 우현 접근: 상대의 홍등(좌현등, red light) 보임 → 내가 피항선
   - 좌현 접근: 상대의 녹등(우현등, green light) 보임 → 내가 유지선

7. 실무 팁:
   - "Red to Red, Green to Green, Safe passing in between" (마주치는 상태)
   - "Green to Red, Give way ahead" (내 우현에 상대 좌현 = 내가 피함)
   - "Red to Green, Keep it keen" (내 좌현에 상대 우현 = 침로 유지)
        """,
        "actions": ["우현 변침 (선미 통과)", "감속/정지", "상대 선박 앞 횡단 금지"],
        "vessel_types": ["동력선"],
        "visibility_conditions": ["시계 내"],
        "legal_weight": 10
    },
    {
        "id": "rule_16",
        "title": "제16조 - 피항선의 동작(Action by Give-way Vessel)",
        "category": "Conduct of Vessels in Sight",
        "trigger_situations": ["피항 의무 발생"],
        "summary": "다른 선박의 진로를 피하여야 할 의무가 있는 선박은 충돌을 피하기 위하여 할 수 있는 한 조기에 또한 충분히 동작을 취하여야 한다.",
        "full_text": """제16조 피항선의 동작(Action by Give-way Vessel)

1. 피항선 의무:
   타선의 진로를 피하여야 할 의무가 있는 모든 선박은 그 충돌을 피하기 위하여 할 수 있는 한 조기에 또한 대폭적인 동작(substantial action)을 취하여야 한다.

2. 조기 동작 원칙:
   - "Early and substantial" - 이른 시기에, 대폭적으로
   - 충돌 위험을 인지한 즉시 회피 동작 시행
   - 상대가 명확히 인식할 수 있을 정도의 큰 변침/감속

3. 적용 규칙:
   - 제13조 추월 상황의 추월선
   - 제14조 마주치는 상황의 양 선박
   - 제15조 횡단 상황에서 상대를 우현에 둔 선박
   - 제18조 각종 선박 간의 책임에서 피항 의무가 있는 선박

4. 충분한 동작:
   - 단순히 속력을 약간 줄이는 것만으로는 불충분
   - 침로 변경은 타선이 쉽게 인지할 수 있을 정도로 대폭적
   - 필요시 감속 또는 정지, 후진까지 포함

5. 지속적 의무:
   - 충돌 위험이 완전히 소멸될 때까지
   - 타선과 충분히 떨어질 때까지 피항 의무 지속
        """,
        "actions": ["조기 대폭 동작", "명확한 회피 의사 표시", "충돌 위험 소멸까지 지속"],
        "vessel_types": ["피항선"],
        "visibility_conditions": ["시계 내"],
        "legal_weight": 10
    },
    {
        "id": "rule_17",
        "title": "제17조 - 유지선의 동작(Action by Stand-on Vessel)",
        "category": "Conduct of Vessels in Sight",
        "trigger_situations": ["유지선 역할", "피항선 부적절한 동작"],
        "summary": "피항선이 적절한 동작을 취하지 않는 경우, 유지선도 충돌을 피하기 위한 동작을 취할 수 있으며, 필요시 취해야 한다.",
        "full_text": """제17조 유지선의 동작(Action by Stand-on Vessel)

1. 기본 원칙 - 침로와 속력 유지:
   - 유지선(Stand-on vessel)은 침로와 속력을 유지하여야 한다
   - 피항선이 적절한 동작을 취할 수 있도록 예측 가능한 항행 유지

2. 협력 동작 권한 (May take action):
   피항선이 이 규칙에 따라 적절한 동작을 취하고 있지 아니한 것이 명백하게 된 경우, 유지선은 자선의 동작만으로 충돌을 피하기 위한 동작을 취할 수 있다.

3. 독자 회피 의무 (Shall take action):
   a) 피항선과 아주 가까이 접근하여 피항선의 동작만으로는 충돌을 피할 수 없다고 판단되는 경우
   b) 유지선은 충돌을 피하기 위하여 최선의 협력 동작을 취하여야 한다

4. 횡단 상황 특칙:
   제15조(횡단 상황)에 따라 타선의 진로를 피하여야 하는 유지선은:
   - 상황이 허용하는 한 타선의 좌현쪽으로 침로를 변경해서는 안 된다
   - 즉, 우현 변침만 허용 (좌현 변침 금지)

5. 실무 적용:
   - 1단계: 침로·속력 유지 (피항선의 동작 기대)
   - 2단계: 피항선이 안 피하면 협력 동작 가능 (May)
   - 3단계: 근접하면 반드시 회피 (Shall) - "최후 수단 (Last resort)"
   - 긴급 상황: 기적 5단음 이상 + 즉시 회피

6. 유지선의 책임:
   - 유지선이라도 충돌 시 책임 면제되지 않음
   - 상대가 안 피하는 것이 명백하면 조기 협력 필요
   - "Stand-on"은 "충돌 권한"이 아님
        """,
        "actions": ["침로·속력 유지", "피항선 동작 감시", "협력 회피 (필요시)", "긴급 독자 회피"],
        "vessel_types": ["유지선"],
        "visibility_conditions": ["시계 내"],
        "legal_weight": 9
    },
    {
        "id": "rule_18",
        "title": "제18조 - 각종 선박 간의 책임(Responsibilities Between Vessels)",
        "category": "Conduct of Vessels in Sight",
        "trigger_situations": ["다른 종류 선박 조우"],
        "summary": "동력선은 범선, 어로선, 조종불능선, 제한된 조종 능력 선박의 진로를 피하여야 한다.",
        "full_text": """제18조 각종 선박 간의 책임(Responsibilities Between Vessels)

이 부분의 규정(제9조, 제10조, 제13조를 제외)이 적용되는 경우, 각종 선박 간의 우선순위:

1. 동력선(Power-driven vessel) 피항 의무 대상:
   a) 조종불능선(Not under command - NUC)
   b) 제한된 조종능력선(Restricted in ability to maneuver - RAM)
   c) 어로에 종사하고 있는 선박(Fishing vessel)
   d) 범선(Sailing vessel)

2. 범선(Sailing vessel) 피항 의무 대상:
   a) 조종불능선
   b) 제한된 조종능력선
   c) 어로에 종사하고 있는 선박

3. 어로선(Fishing vessel) 피항 의무 대상:
   a) 조종불능선
   b) 제한된 조종능력선

4. 우선순위 정리 (높음 → 낮음):
   - 1순위: 조종불능선 (NUC) - 검은 구 2개
   - 2순위: 제한된 조종능력선 (RAM) - 빨강-흰색-빨강 구 3개
   - 3순위: 어로에 종사하고 있는 선박 - 빨강-흰색 구 2개
   - 4순위: 범선 - 형상물 없음
   - 5순위: 동력선 - 일반 선박

5. 특별 규정:
   a) 수면비행선(Seaplane, WIG): 일반적으로 다른 선박 피항, 범선 방해 금지

   b) 어로선 상호 간: 제13~17조 적용

   c) 어로선의 의무:
      - 항행 중인 다른 선박의 통행을 방해하지 않도록 노력
      - 협수로(narrow channel) 내에서는 일반 항행선 방해 금지

6. 실무 적용:
   - "Not under command > RAM > Fishing > Sailing > Power"
   - 동력선이 가장 피해야 할 의무 많음
   - 다만, 제9조(협수로), 제10조(분리통항) 우선

7. 주의사항:
   - 우선순위가 높다고 무조건 직진 권한이 있는 것은 아님
   - 충돌 위험 시 모든 선박은 제8조(충돌 회피 동작) 따라 협력
        """,
        "actions": ["선박 종류 식별", "우선순위 판단", "피항 의무 이행"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["시계 내"],
        "legal_weight": 9
    },
    {
        "id": "rule_19",
        "title": "제19조 - 시계가 제한된 상태에서의 선박의 운항(Conduct in Restricted Visibility)",
        "category": "Restricted Visibility",
        "trigger_situations": ["안개", "눈", "비", "모래폭풍", "시계 제한"],
        "summary": "시계가 제한된 상태에서는 안전한 속력으로 항행하며, 레이더로 탐지한 선박을 피해야 한다.",
        "full_text": """제19조 시계가 제한된 상태에서의 선박의 운항(Conduct in Restricted Visibility)

시계가 제한되었거나 제한될 우려가 있는 수역 내 또는 그 부근을 항행하는 모든 선박:

1. 기본 의무:
   - 제한된 시정에 적합한 안전한 속력으로 항행
   - 충돌 위험을 조기에 탐지하기 위한 적절한 경계
   - 기관을 즉시 사용할 수 있는 상태 유지

2. 레이더 탐지 시 조치:
   레이더만으로 다른 선박의 존재를 탐지한 경우:

   a) 충돌 위험 여부 판단 (조기 경고)
   b) 충돌 위험이 있다고 판단되면 충분한 여유를 두고 회피 동작

   c) 회피 동작 시 금지 사항:
      - 정선 또는 거의 정선인 선박 제외하고:
      ① 정선 방향 전방의 선박: 좌현쪽 침로 변경 금지
      ② 정선 방향 측방 후방의 선박: 그 선박쪽으로의 침로 변경 금지

3. 안개 신호 청취 시:
   - 자선의 정선 방향 전방에서 다른 선박의 안개 신호를 들은 경우
   - 충돌 위험이 없다고 확인될 때까지:
     ① 침로를 유지할 수 있는 최소 속력으로 감속
     ② 필요시 기관 정지 (Stop engines)
     ③ 위험이 지나갈 때까지 매우 신중하게 항행

4. 실무 지침:
   a) 시계 제한 수역 진입 전:
      - 감속
      - 경계 강화
      - 레이더 장거리/단거리 교번 스캐닝
      - 안개 신호 발사 준비

   b) 레이더 플로팅:
      - 최소 3회 연속 플로팅으로 CPA/TCPA 계산
      - CPA 1마일 이내: 즉시 회피 동작

   c) 회피 방향 원칙:
      - 우현 변침 우선 (좌현 변침 최대한 회피)
      - 감속 또는 정지
      - 필요시 180도 선회

5. 제8부(제13~17조) 적용 정지:
   - 시계 제한 시 마주침/횡단/추월 규정 적용 안 됨
   - 오직 제19조 규정만 적용
   - 육안으로 서로 볼 수 있게 되면 제8부 규정 적용
        """,
        "actions": ["감속", "레이더 경계", "안전한 속력", "조기 회피", "좌현 변침 회피", "기관 정지 (필요시)"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["시계 제한"],
        "legal_weight": 10
    },
    {
        "id": "rule_09",
        "title": "제9조 - 좁은 수로(Narrow Channels)",
        "category": "General",
        "trigger_situations": ["협수로 항행", "좁은 항로"],
        "summary": "좁은 수로에서는 우측 통행을 원칙으로 하며, 소형선은 대형선의 통행을 방해하지 않아야 한다.",
        "full_text": """제9조 좁은 수로(Narrow Channels)

1. 기본 원칙 - 우측 통행:
   좁은 수로 또는 항로를 따라 항행하는 선박은 안전하게 항행할 수 있는 한 그 수로 또는 항로의 우현쪽 외측 한계를 따라 항행하여야 한다.

2. 소형선박 의무:
   - 길이 20미터 미만의 선박
   - 범선
   - 어로에 종사하는 선박
   → 좁은 수로 내에서만 안전하게 항행할 수 있는 선박의 통행을 방해해서는 안 된다

3. 횡단 금지:
   선박은 횡단으로 인하여 수로 내에서만 안전하게 항행할 수 있는 선박의 통행을 방해하게 되는 경우 좁은 수로를 횡단해서는 안 된다.

4. 추월 절차:
   a) 추월선: 피추월선에게 의도를 기적으로 표시
      - 우현 추월 희망: 장음 2 + 단음 1
      - 좌현 추월 희망: 장음 2 + 단음 2

   b) 피추월선: 동의 시
      - 장음 1 + 단음 1 + 장음 1 + 단음 1
      - 안전한 통과를 위한 협력 동작

   c) 의심 또는 거부:
      - 단음 5회 이상

5. 굴곡부 접근:
   - 시야가 장애를 받는 굴곡부나 수로 접근 시
   - 장음(prolonged blast) 1회 발사
   - 굴곡부 반대편 접근 선박도 장음으로 답신

6. 정박/정지 금지:
   - 좁은 수로 내에서 정박(anchor) 금지
   - 부득이한 경우 외에는 정지 금지
   - 다른 선박 통항에 방해되지 않도록

7. 어로 금지:
   - 어로에 종사하는 선박은 좁은 수로 내에서 다른 선박의 통행을 방해하는 어로 금지
        """,
        "actions": ["우측 통행", "대형선 양보", "추월 신호 교환", "횡단 자제", "굴곡부 기적"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["모든 시정"],
        "legal_weight": 9
    },
    {
        "id": "rule_10",
        "title": "제10조 - 분리통항방식(Traffic Separation Schemes)",
        "category": "General",
        "trigger_situations": ["TSS 수역", "통항분리대"],
        "summary": "분리통항대에서는 지정된 통항로를 따라 일반적인 교통 흐름 방향으로 항행하여야 한다.",
        "full_text": """제10조 분리통항방식(Traffic Separation Schemes - TSS)

1. 기본 원칙:
   a) 적절한 통항로(traffic lane) 사용
   b) 해당 통항로의 일반적인 교통 흐름 방향으로 항행
   c) 분리선 또는 분리대(separation zone/line)를 피하여 항행
   d) 통항로 끝에서 진입/출항

2. 통항로 진입/출항:
   - 가능한 한 통항로 끝에서만 진입 또는 출항
   - 부득이 측면에서 진입/출항하는 경우:
     → 통항로 일반 흐름 방향에 대하여 가능한 한 작은 각도로

3. 횡단 규정:
   - 통항로를 횡단하는 선박: 통항로의 일반 교통 흐름에 대하여 가능한 한 직각에 가깝게 횡단

4. 연안통항대(Inshore Traffic Zone):
   선박은 연안통항대를 일반적으로 사용하지 않음. 다만 다음의 경우 사용 가능:
   - 길이 20미터 미만 선박
   - 범선
   - 어로에 종사하는 선박
   - 연안 항구로 출입하는 경우

5. 금지 사항:
   a) 통항로 내 정박: 부득이한 경우 제외 절대 금지
   b) 분리선/분리대 항행: 긴급 상황 제외 금지
   c) 교통 흐름 역방향 항행

6. 어로 금지:
   - 어로에 종사하는 선박은 통항로 내에서 다른 선박의 통행을 방해하는 어로 금지

7. 20미터 미만 선박 및 범선:
   - 통항로를 따라 항행하는 동력선의 안전한 통행을 방해하지 말 것

8. 조종제한선:
   - 조종불능선(NUC)
   - 제한된 조종능력선(RAM)
   - 해저 케이블/파이프라인 작업 선박
   → 통항로 사용 필요 시 위 규정 면제
     (단, 다른 선박 통행 최대한 방해하지 않도록 노력)
        """,
        "actions": ["지정 통항로 사용", "교통 흐름 방향 항행", "분리대 회피", "직각 횡단"],
        "vessel_types": ["모든 선박"],
        "visibility_conditions": ["모든 시정"],
        "legal_weight": 9
    }
]

def save_colregs_data():
    """COLREGs 데이터를 JSON 파일로 저장"""
    output_dir = "/home/user/HASS/data/raw"
    os.makedirs(output_dir, exist_ok=True)

    output_file = os.path.join(output_dir, "colregs_rules.json")

    with open(output_file, 'w', encoding='utf-8') as f:
        json.dump(COLREGS_RULES, f, ensure_ascii=False, indent=2)

    print(f"✅ COLREGs 규정 {len(COLREGS_RULES)}개 저장 완료: {output_file}")
    print(f"📋 저장된 규정: {[rule['id'] for rule in COLREGS_RULES]}")

    return output_file

if __name__ == "__main__":
    save_colregs_data()
